{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///Users/dongkyun/Project/GiveChain/frontend/givechain-next/lib/aaSdk.ts"],"sourcesContent":["// lib/aaSdk.ts\n\"use client\";\n\nimport { Web3Auth } from \"@web3auth/modal\";\nimport { CHAIN_NAMESPACES, WEB3AUTH_NETWORK } from \"@web3auth/base\";\n\nconst clientId = process.env.NEXT_PUBLIC_WEB3AUTH_CLIENT_ID as string;\n\nlet web3auth: Web3Auth | null = null;\n\nexport type LoginResult = {\n  provider: string;\n  providerUserId: string;\n  walletAddress: string;\n  email: string;\n  name: string;\n};\n\nexport const initWeb3Auth = async (): Promise<Web3Auth> => {\n  if (web3auth) return web3auth;\n\n  const options: any = {\n    clientId,\n    web3AuthNetwork: WEB3AUTH_NETWORK.SAPPHIRE_DEVNET,\n    chainConfig: {\n      chainNamespace: CHAIN_NAMESPACES.EIP155,\n      chainId: \"0x1\",\n      rpcTarget: \"https://rpc.ankr.com/eth\",\n    },\n  };\n\n  console.log(\"[Web3Auth] 옵션:\", options);\n\n  web3auth = new Web3Auth(options);\n\n  if (typeof (web3auth as any).initModal === \"function\") {\n    await (web3auth as any).initModal();\n  } else if (typeof (web3auth as any).init === \"function\") {\n    await (web3auth as any).init();\n  }\n\n  console.log(\"[Web3Auth] 초기화 완료\");\n  return web3auth;\n};\n\nexport const loginWithGoogle = async (): Promise<LoginResult> => {\n  console.log(\"[Web3Auth] loginWithGoogle 진입\");\n\n  const wa = await initWeb3Auth();\n\n  const provider = await wa.connect();\n  console.log(\"[Web3Auth] provider:\", provider);\n\n  if (!provider) {\n    throw new Error(\"지갑 provider를 얻지 못했습니다.\");\n  }\n\n  const userInfo: any = await wa.getUserInfo();\n  console.log(\"[Web3Auth] userInfo:\", userInfo);\n\n  const accounts = (await provider.request({\n    method: \"eth_accounts\",\n  })) as string[];\n\n  console.log(\"[Web3Auth] accounts:\", accounts);\n\n  const providerType =\n    userInfo.typeOfLogin ??\n    userInfo.loginType ??\n    \"google\";\n\n  const providerUserId =\n    userInfo.verifierId ??\n    userInfo.aggregateVerifierId ??\n    userInfo.email ??\n    accounts?.[0] ??\n    \"\";\n\n  if (!providerUserId) {\n    console.error(\"[Web3Auth] providerUserId를 얻지 못했습니다.\", userInfo);\n    throw new Error(\"providerUserId를 얻지 못했습니다.\");\n  }\n\n  return {\n    provider: providerType,\n    providerUserId,\n    walletAddress: accounts?.[0] ?? \"\",\n    email: userInfo.email ?? \"\",\n    name: userInfo.name ?? \"\",\n  };\n};"],"names":[],"mappings":"AAAA,eAAe;;;;;;;AAGf;AAAA;AACA;AAAA;AAHA;;;AAKA,MAAM;AAEN,IAAI,WAA4B;AAUzB,MAAM,eAAe;IAC1B,IAAI,UAAU,OAAO;IAErB,MAAM,UAAe;QACnB;QACA,iBAAiB,kMAAgB,CAAC,eAAe;QACjD,aAAa;YACX,gBAAgB,wMAAgB,CAAC,MAAM;YACvC,SAAS;YACT,WAAW;QACb;IACF;IAEA,QAAQ,GAAG,CAAC,kBAAkB;IAE9B,WAAW,IAAI,iNAAQ,CAAC;IAExB,IAAI,OAAO,AAAC,SAAiB,SAAS,KAAK,YAAY;QACrD,MAAM,AAAC,SAAiB,SAAS;IACnC,OAAO,IAAI,OAAO,AAAC,SAAiB,IAAI,KAAK,YAAY;QACvD,MAAM,AAAC,SAAiB,IAAI;IAC9B;IAEA,QAAQ,GAAG,CAAC;IACZ,OAAO;AACT;AAEO,MAAM,kBAAkB;IAC7B,QAAQ,GAAG,CAAC;IAEZ,MAAM,KAAK,MAAM;IAEjB,MAAM,WAAW,MAAM,GAAG,OAAO;IACjC,QAAQ,GAAG,CAAC,wBAAwB;IAEpC,IAAI,CAAC,UAAU;QACb,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,WAAgB,MAAM,GAAG,WAAW;IAC1C,QAAQ,GAAG,CAAC,wBAAwB;IAEpC,MAAM,WAAY,MAAM,SAAS,OAAO,CAAC;QACvC,QAAQ;IACV;IAEA,QAAQ,GAAG,CAAC,wBAAwB;IAEpC,MAAM,eACJ,SAAS,WAAW,IACpB,SAAS,SAAS,IAClB;IAEF,MAAM,iBACJ,SAAS,UAAU,IACnB,SAAS,mBAAmB,IAC5B,SAAS,KAAK,IACd,UAAU,CAAC,EAAE,IACb;IAEF,IAAI,CAAC,gBAAgB;QACnB,QAAQ,KAAK,CAAC,wCAAwC;QACtD,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;QACL,UAAU;QACV;QACA,eAAe,UAAU,CAAC,EAAE,IAAI;QAChC,OAAO,SAAS,KAAK,IAAI;QACzB,MAAM,SAAS,IAAI,IAAI;IACzB;AACF"}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///Users/dongkyun/Project/GiveChain/frontend/givechain-next/components/LoginButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { loginWithGoogle } from \"@/lib/aaSdk\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { useRouter } from \"next/navigation\";\n\ntype BackendLoginResponse = {\n  id: number;\n  name: string;\n  email: string;\n  walletAddress: string;\n  accessToken: string;\n};\n\nexport const LoginButton = () => {\n  const { setUser } = useAuth();\n  const router = useRouter();\n\n  const handleLogin = async () => {\n    console.log(\"[LoginButton] 클릭됨\");\n\n    try {\n      const result = await loginWithGoogle();\n      console.log(\"[LoginButton] Web3Auth result:\", result);\n\n      const backendResponse = await fetch(\n        \"http://localhost:8080/api/auth/login\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n          },\n          credentials: \"include\",\n          body: JSON.stringify({\n            provider: result.provider,\n            providerMemberId: result.providerUserId,\n            email: result.email,\n            name: result.name,\n            walletAddress: result.walletAddress\n          }),\n        }\n      );\n\n      if (!backendResponse.ok) {\n        const text = await backendResponse.text();\n        console.error(\"[LoginButton] backend error:\", text);\n        throw new Error(\"백엔드 로그인 실패\");\n      }\n\n      const userData: BackendLoginResponse = await backendResponse.json();\n      console.log(\"[LoginButton] backend userData:\", userData);\n\n      setUser({\n        id: userData.id,\n        name: userData.name,\n        email: userData.email,\n        walletAddress: userData.walletAddress,\n        accessToken: userData.accessToken,\n      });\n\n      router.push(\"/main\");\n    } catch (e) {\n      console.error(\"[LoginButton] login error:\", e);\n      alert(\"로그인 중 오류가 발생했습니다. 콘솔을 확인해 주세요.\");\n    }\n  };\n\n  return (\n    <button className=\"gc-login-button\" onClick={handleLogin}>\n      <span className=\"gc-google-icon\">G</span>\n      <span>Google로 계속하기</span>\n    </button>\n  );\n};"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAcO,MAAM,cAAc;IACzB,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,4HAAO;IAC3B,MAAM,SAAS,IAAA,+IAAS;IAExB,MAAM,cAAc;QAClB,QAAQ,GAAG,CAAC;QAEZ,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,+HAAe;YACpC,QAAQ,GAAG,CAAC,kCAAkC;YAE9C,MAAM,kBAAkB,MAAM,MAC5B,wCACA;gBACE,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,aAAa;gBACb,MAAM,KAAK,SAAS,CAAC;oBACnB,UAAU,OAAO,QAAQ;oBACzB,kBAAkB,OAAO,cAAc;oBACvC,OAAO,OAAO,KAAK;oBACnB,MAAM,OAAO,IAAI;oBACjB,eAAe,OAAO,aAAa;gBACrC;YACF;YAGF,IAAI,CAAC,gBAAgB,EAAE,EAAE;gBACvB,MAAM,OAAO,MAAM,gBAAgB,IAAI;gBACvC,QAAQ,KAAK,CAAC,gCAAgC;gBAC9C,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,WAAiC,MAAM,gBAAgB,IAAI;YACjE,QAAQ,GAAG,CAAC,mCAAmC;YAE/C,QAAQ;gBACN,IAAI,SAAS,EAAE;gBACf,MAAM,SAAS,IAAI;gBACnB,OAAO,SAAS,KAAK;gBACrB,eAAe,SAAS,aAAa;gBACrC,aAAa,SAAS,WAAW;YACnC;YAEA,OAAO,IAAI,CAAC;QACd,EAAE,OAAO,GAAG;YACV,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,MAAM;QACR;IACF;IAEA,qBACE,8OAAC;QAAO,WAAU;QAAkB,SAAS;;0BAC3C,8OAAC;gBAAK,WAAU;0BAAiB;;;;;;0BACjC,8OAAC;0BAAK;;;;;;;;;;;;AAGZ"}},
    {"offset": {"line": 284, "column": 0}, "map": {"version":3,"sources":["file:///Users/dongkyun/Project/GiveChain/frontend/givechain-next/app/login/page.tsx"],"sourcesContent":["// app/login/page.tsx\n\"use client\";\n\nimport { LoginButton } from \"@/components/LoginButton\";\n\nexport default function LoginPage() {\n  return (\n    <main className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-[#050816] via-slate-900 to-[#050816] text-white\">\n      <div className=\"bg-[#0b1220]/90 backdrop-blur rounded-3xl shadow-2xl p-10 w-full max-w-xl border border-white/10\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-extrabold\">\n            <span className=\"text-blue-400\">Give</span>\n            <span className=\"text-indigo-300\">Chain</span>\n          </h1>\n          <p className=\"mt-3 text-sm text-gray-300\">\n            당신의 선행이 블록체인 위에 남습니다.\n          </p>\n        </div>\n\n        <div className=\"space-y-3 mb-8\">\n          <h2 className=\"text-xl font-semibold\">GiveChain 로그인</h2>\n          <p className=\"text-sm text-gray-400\">\n            소셜 로그인 한 번으로 지갑과 계정을 동시에 생성해요.\n          </p>\n        </div>\n\n        <LoginButton />\n      </div>\n    </main>\n  );\n}"],"names":[],"mappings":"AAAA,qBAAqB;;;;;;AAGrB;AAFA;;;AAIe,SAAS;IACtB,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;;8CACZ,8OAAC;oCAAK,WAAU;8CAAgB;;;;;;8CAChC,8OAAC;oCAAK,WAAU;8CAAkB;;;;;;;;;;;;sCAEpC,8OAAC;4BAAE,WAAU;sCAA6B;;;;;;;;;;;;8BAK5C,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAwB;;;;;;sCACtC,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;8BAKvC,8OAAC,yIAAW;;;;;;;;;;;;;;;;AAIpB"}}]
}